(function(){BX.namespace("BX.Sender");if(BX.Sender.TriggerEditor){return}var e=BX.Sender.Page;var t=BX.Sender.Helper;function i(){this.context=null;this.editor=null}i.prototype.init=function(t){this.isFrame=t.isFrame||false;this.isSaved=t.isSaved||false;this.triggers=t.triggers;this.prettyDateFormat=t.prettyDateFormat;this.mess=t.mess||{};this.campaignTile=t.campaignTile||{};this.context=BX(t.containerId);this.initUi();e.initButtons()};i.prototype.initUi=function(){this.ui={title:t.getNode("campaign-title",this.context)};if(!this.ui.title.value.trim()){this.ui.title.value=t.replace(this.mess.patternTitle,{name:this.mess.newTitle,date:BX.date.format(this.prettyDateFormat)})}if(this.isFrame){t.titleEditor.init({dataNode:this.ui.title})}if(this.isFrame&&this.isSaved){top.BX.onCustomEvent(top,"sender-campaign-edit-change",[this.campaignTile]);BX.Sender.Page.slider.close()}};i.prototype.setTrigger=function(e,t){var i="START";if(e)i="END";var s=BX("ENDPOINT_"+i+"_MODULE_ID");var r=BX("ENDPOINT_"+i+"_CODE");var a=BX("ENDPOINT_"+i+"_FORM");var n=BX("ENDPOINT_"+i+"_IS_CLOSED_TRIGGER");var l=BX("ENDPOINT_"+i+"_CLOSED_TRIGGER_TIME");var o=BX("ENDPOINT_"+i+"_RUN_FOR_OLD_DATA_FORM");var _=BX("ENDPOINT_"+i+"_CLOSED_FORM");var g=BX("ENDPOINT_"+i+"_SETTINGS");if(t&&this.triggers[i][t]){s.value=this.triggers[i][t].MODULE_ID;r.value=this.triggers[i][t].CODE;a.innerHTML=this.triggers[i][t].FORM;n.value=this.triggers[i][t].IS_CLOSED_TRIGGER;l.value=this.triggers[i][t].CLOSED_TRIGGER_TIME;var d=this.triggers[i][t].CAN_RUN_FOR_OLD_DATA;if(n.value==="Y")_.style.display="";else _.style.display="none";if(n.value==="Y"||a.innerHTML.length>0)g.style.display="";else g.style.display="none";if(o){if(d==="Y")o.style.display="";else o.style.display="none"}}else{s.value="";r.value="";a.innerHTML="";n.value="N";_.style.display="none";g.style.display="none"}};BX.Sender.TriggerEditor=new i})(window);